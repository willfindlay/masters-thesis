\documentclass[
  fontsize=12pt,
  paper=letter,
  twoside,
  cleardoublepage=none,
  %final
]{scrbook}

\usepackage[utf8]{inputenc}
\usepackage{findlay}
\usepackage{epigraph}

% for changing margins in titlepage
\RequirePackage{geometry}

% for 1.5 line spacing
\RequirePackage{setspace}
\doublespacing%
% single spacing for table of contents
\AfterTOCHead{\singlespacing}

% recompute page layout based on the above
\recalctypearea%

% Use rmfamily for chapters, sections, etc.
\addtokomafont{disposition}{\rmfamily}

% Fix top and bottom margins
\newgeometry{tmargin=1.67in, bmargin=1.67in}

% Uncomment this to help debug layout
%\usepackage{showframe}

\newcommand{\bpfbox}{\textsc{BPFBox}}
\newcommand{\bpfcontain}{\textsc{BPFContain}}

\addbibresource{refs.bib}

\title{A Practical, Light-Weight, and Flexible Confinement Framework in eBPF}
\author{William P.~Findlay}
\date{August, 2021}

\begin{document}

% ==============================================================================
% Cover Page, Abstract and TOC
% ==============================================================================

% Title page
\input{titlepage}

\frontmatter%

\section*{Abstract}%
\addcontentsline{toc}{section}{Abstract}%
\todo{ABSTRACT HERE}
\cleardoublepage%

\section*{Acknowledgements}%
\addcontentsline{toc}{section}{Acknowledgements}%
\todo{ACKNOWLEDGEMENTS HERE}
\cleardoublepage%

\section*{Prior Publication}%
\addcontentsline{toc}{section}{Prior Publication}%
\todo{PRIOR PUBLICATION HERE}
\cleardoublepage%

% TOC
\begingroup
\hypersetup{linkcolor=black}
\tableofcontents
\listoffigures
\listoftables
\endgroup

\mainmatter%

% ==============================================================================
% Main Chapter Content Here
% ==============================================================================

\chapter{Introduction}%
\label{c:introduction}
\input{chapters/introduction}

\chapter{Background}%
\label{c:background}
\input{chapters/background}

\chapter{\bpfbox: A Prototype Process Confinement Mechanism}%
\label{c:bpfbox}
\input{chapters/bpfbox}

\chapter{\bpfcontain: Extending \bpfbox{} to Model Containers}%
\label{c:bpfcontain}
\input{chapters/bpfcontain}

\chapter{Discussion}%
\label{c:discussion}
\input{chapters/discussion}

\chapter{Related Work}%
\label{c:related}
\input{chapters/related}

\chapter{Conclusion}%
\label{c:conclusion}
\input{chapters/conclusion}

\cleardoublepage%
\printbibliography%
\addcontentsline{toc}{chapter}{Bibliography}%
\nocite{*} % TODO: Remove this when finished

\end{document}
