\documentclass[
  fontsize=12pt,
  titlepage=firstiscover,
  paper=letter,
  twoside,
  cleardoublepage=plain,
  parskip=half-,
  DIV=10,
  parindent,
  appendixprefix,
  chapterprefix,
  %final
]{scrbook}

\usepackage[utf8]{inputenc}

\usepackage[acronym, toc, numberedsection=nolabel, section=chapter]{glossaries}
\setacronymstyle{short-long}
\makeglossaries
\newacronym{os}{OS}{Operating System}
\newacronym{bpf}{BPF}{Berkeley Packet Filter}
\newacronym{ebpf}{eBPF}{Extended BPF}
\newacronym{cbpf}{cBPF}{Classic BPF}
\newacronym{btf}{BTF}{BPF Type Format}
\newacronym{jit}{JIT}{Just-In-Time}
\newacronym{core}{CO-RE}{Compile Once Run Everywhere}
\newacronym{bpffs}{\textit{bpffs}}{BPF Filesystem}
\newacronym{dac}{DAC}{Discretionary Access Control}
\newacronym{acl}{ACL}{Access Control List}
\newacronym{mac}{MAC}{Mandatory Access Control}
\newacronym{mls}{MLS}{Multi-Level Security}
\newacronym{lsm}{LSM}{Linux Security Modules}
\newacronym{uid}{UID}{User ID}
\newacronym{gid}{GID}{Group ID}
\newacronym{euid}{EUID}{Effective User ID}
\newacronym{egid}{EGID}{Effective Group ID}
\newacronym{tcb}{TCB}{Trusted Computing Base}
\newacronym{cots}{COTS}{Commercial Off-The-Shelf}

\usepackage{findlay}
\usepackage{epigraph}

% for changing margins in titlepage
\RequirePackage{geometry}

% for 1.5 line spacing
\RequirePackage{setspace}
\doublespacing%
% single spacing for table of contents
\AfterTOCHead{\singlespacing}

% recompute page layout based on the above
\recalctypearea%

% Use rmfamily for chapters, sections, etc.
\addtokomafont{disposition}{\rmfamily}

% Fix top and bottom margins
%\newgeometry{margin=1in}

% Uncomment this to help debug layout
%\usepackage{showframe}

\setcapindent{0pt}

\newcommand{\bpfbox}{\textsc{BPFBox}}
\newcommand{\bpfcontain}{\textsc{BPFContain}}

\addbibresource{refs.bib}

\title{A Practical, Light-Weight, and Flexible Confinement Framework in eBPF}
\author{William P.~Findlay}
\date{August, 2021}

\begin{document}

% ==============================================================================
% Cover Page, Abstract and TOC
% ==============================================================================

% Title page
\input{titlepage}

\frontmatter%

\chapter*{Abstract}%
\addcontentsline{toc}{chapter}{Frontmatter}%
\addcontentsline{toc}{section}{Abstract}%
\todo{ABSTRACT HERE}
\cleardoublepage%

\chapter*{Acknowledgements}%
\addcontentsline{toc}{section}{Acknowledgements}%
\todo{ACKNOWLEDGEMENTS HERE}
\cleardoublepage%

\chapter*{Prior Publication}%
\addcontentsline{toc}{section}{Prior Publication}%
\todo{PRIOR PUBLICATION HERE}
\cleardoublepage%

% TOC
\begingroup
\hypersetup{linkcolor=black}
\tableofcontents
\listoffigures
\listoftables
\endgroup

\mainmatter%

% ==============================================================================
% Main Chapter Content Here
% ==============================================================================

\chapter{Introduction}%
\label{c:introduction}
\input{chapters/introduction}

\chapter{Background and Related Work}%
\label{c:background}
\input{chapters/background}

\chapter{The Confinement Problem}%
\label{c:confinement-problem}
\input{chapters/confinement-problem}

\chapter{\bpfbox: A Prototype Process Confinement Mechanism}%
\label{c:bpfbox}
\input{chapters/bpfbox}

\chapter{\bpfcontain: Extending \bpfbox{} to Model Containers}%
\label{c:bpfcontain}
\input{chapters/bpfcontain}

\chapter{Evaluation}%
\label{c:evaluation}
% TODO Include tex file here

\chapter{Case Studies}%
\label{c:case-studies}
% TODO Include tex file here

\chapter{Discussion}%
\label{c:discussion}
\input{chapters/discussion}

\chapter{Related Work}%
\label{c:related}
\input{chapters/related}

\chapter{Conclusion}%
\label{c:conclusion}
\input{chapters/conclusion}

\cleardoublepage%
\printbibliography%
\addcontentsline{toc}{chapter}{Bibliography}%
\nocite{*} % TODO: Remove this when finished

\appendix%
\printglossary[type=\acronymtype, title=List of Acronyms, toctitle=List of Acronyms]

\end{document}
